<html class="hydrated">
    <head>
        <style data-styles="">
            ion-icon {
                visibility: hidden
            }
            
            .hydrated {
                visibility: inherit
            }
        </style>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>Zest</title>
        <link rel="stylesheet" href="assets/css/bootstrap-datetimepicker.min.css">
        <link rel="stylesheet" href="assets/css/style.css">
        <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover">
        <link href="assets/zestlogo.png" rel="icon">
        <script type="module" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.esm.js" data-stencil-namespace="ionicons"></script>
        <script nomodule="" src="https://unpkg.com/ionicons@5.0.0/dist/ionicons/ionicons.js" data-stencil-namespace="ionicons"></script>
    </head>
<body>
    <div id="loader" class="hidden">
        Please do not reload page untill data gets added
    </div>
    <div class="col-lg-12 col-md-12">
        <div class="section mt-1 pull-left" style="width: 100%;">
            <div class="col-12 pull-left p-0" style="width: 100%;display: flex;align-items: center;justify-content: center;text-align: center;">
                <div class="col-2 pull-left text-center"><img src="assets/logo.png" style="height: 100px;"></div>                                    
            </div>
            <div class="col-12 mt-2 pull-left get_details" style="width: 100%;">
                <div class="col-12 pull-left">
                    <div class=" col-12 pull-left pt-1 pb-1 mb-1 border-blue font12 br8" style=" background: white; "> 
                        <div class="text-center fs-4 text-black fw-bold mb-1">Corporate Details
                            <div class="pull-right pe-1 edit_customer fs-6" data-bs-target="#add_customer_modal" data-bs-toggle="modal">
                                <button type="button" class="btn btn-primary btn-block btn-sm"><ion-icon name="create-outline" role="img" class="md hydrated" aria-label="create outline"></ion-icon> Edit</button>                                
                            </div>
                        </div>
                        <div class="pull-left br8 w-100 font-blue border-blue overflow-hidden ">
                            <div class="col-12 pull-left text-left blue-back bold p-0 d-flex">
                                <div class="col-1 pull-left border-right" style="min-height: 21px;">
                                    Date
                                </div>
                                <div class="col-2 pull-left border-right">
                                    Name of the Company
                                </div>
                                <div class="col-1 pull-left border-right">
                                    Address
                                </div>
                                <div class="col-2 pull-left border-right">
                                    Partnership
                                </div>
                                <div class="col-2 pull-left border-right">
                                    TAAI/TAFI 
                                </div>
                                <div class="col-1 pull-left text-left border-right">
                                    Office Tel. No
                                </div>
                                <div class="col-1 pull-left text-left border-right">
                                    Office Fax Nos
                                </div>
                                <div class="col-1 pull-left text-left border-right">
                                    Mobile Nos
                                </div>
                                <div class="col-1 pull-left text-left">
                                    Email Address
                                </div>
                            </div>
                            <div class="col-12 d-flex text-left pull-left pull-left text-center border-top p-0">
                                <div class="col-1 pull-left border-right" style="min-height: 21px;">
                                    Date
                                </div>
                                <div class="col-2 pull-left border-right">
                                   Name of the Company
                                </div>
                                <div class="col-1 pull-left border-right">
                                    Address
                                </div>
                                <div class="col-2 pull-left border-right">
                                    Partnership
                                </div>
                                <div class="col-2 pull-left border-right">
                                    TAAI/TAFI 
                                </div>
                                <div class="col-1 pull-left text-left border-right">
                                    Office Tel. No
                                </div>
                                <div class="col-1 pull-left text-left border-right">
                                    Office Fax Nos
                                </div>
                                <div class="col-1 pull-left text-left border-right">
                                    Mobile Nos
                                </div>
                                <div class="col-1 pull-left text-left">
                                    Email Address
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 mt-2 pull-left">
                    <div class="col-12 p-0 pull-left border-blue blue-back br8">
                        <div class="col-12 pull-left text-center pt-2 fw-bold pb-2 fs-5 font-blue">
                            Owners/Director 1                            
                        </div>
                        <div class="col-12 pull-left">
                            <div class=" col-12 pull-left pt-1 mb-1 border-blue font12 br8" style=" background: white; "> 
                                <div class="col-12 pull-left border-blue-bot p-0">
                                    <div class=" pull-left p-0 font-red col-3">Full Name :</div>
                                    <div class="col-9 pull-left p-0 font-blue"></div>
                                </div>
                                <div class="col-12 p-0 pull-left">
                                    <div class="col-12 pull-left border-blue-bot p-0">
                                        <div class="col-3 pull-left p-0 font-red">Tel No :</div>
                                        <div class="col-9 pull-left font-blue"></div>
                                    </div>
                                    <div class="col-12 pull-left border-blue-bot p-0">
                                        <div class="col-4 pull-left p-0 font-red">Mobile :</div>
                                        <div class="col-8 pull-left p-0 font-blue"></div>
                                    </div>                           
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 mt-2 pull-left">
                    <div class="col-12 p-0 pull-left border-blue blue-back br8">
                        <div class="col-12 pull-left text-center pt-2 fw-bold pb-2 fs-5 font-blue ">
                            Owners/Director 2                             
                        </div>
                        <div class="col-12 pull-left">
                            <div class=" col-12 pull-left pt-1 mb-1 border-blue font12 br8" style=" background: white; "> 
                                <div class="col-12 pull-left border-blue-bot p-0">
                                    <div class=" pull-left p-0 font-red col-3">Full Name :</div>
                                    <div class="col-9 pull-left p-0 font-blue"> </div>
                                </div>
                                <div class="col-12 p-0 pull-left">
                                    <div class="col-12 pull-left border-blue-bot p-0">
                                        <div class="col-3 pull-left p-0 font-red">Tel No :</div>
                                        <div class="col-9 pull-left font-blue"></div>
                                    </div>
                                    <div class="col-12 pull-left border-blue-bot p-0">
                                        <div class="col-4 pull-left p-0 font-red">Mobile :</div>
                                        <div class="col-8 pull-left p-0 font-blue"></div>
                                    </div>                         
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-4 mt-2 pull-left">
                    <div class="col-12 p-0 mb-2 pull-left border-blue blue-back br8">
                        <div class="col-12 pull-left text-center pt-2 fw-bold pb-2 fs-5 font-blue ">
                            Supporting Documents
                        </div>
                        <div class="col-12 pull-left">
                            <div class=" col-12 pull-left pt-1 mb-1 pb-1 border-blue font12 br8" style=" background: white; "> 
                                <div class="col-12 pull-left p-0">
                                    <span class="col-4 pull-left"><button type="button" class="btn btn-primary btn-block btn-sm">PAN Card</button></span>
                                    <span class="col-4 pull-left"><button type="button" class="btn btn-primary btn-block btn-sm">Aadhar</button></span>
                                    <span class="col-4 pull-left"><button type="button" class="btn btn-primary btn-block btn-sm">GST Certificate</button></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="kyc_form" data-bs-backdrop="static" tabindex="-1" role="dialog" aria-modal="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title fs-5">KYC Form</h5>
                </div>
                <div class="modal-body text-start">
                    <input type="hidden" name="id" class="id">
                    <div class="bg-white p-2 border-radius-10">
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Name of the Company<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='company_name' style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Address<span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='company_address' style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label col-md-4 col-12 pull-left" for="name" style="line-height: 20px;">Company is<span class="text-danger">*</span></label>
                                    <div class="form-check col-lg-3 mb-1 col-md-3  col-sm-3 col-6 pull-left text-left">
                                        <input class="form-check-input" type="radio" name='company_type' value="IATA" id="company" data-type="radio" data-name="company_type" data-validation-message="Check one of them" data-required="yes" data-validation-required-message="This field is required">
                                        <label class="form-check-label" for="company">
                                            IATA
                                        </label>
                                    </div>
                                    <div class="form-check col-lg-3  mb-1 col-md-3  col-sm-3 col-6 pull-left text-left">
                                        <input class="form-check-input" type="radio" name='company_type' value="NON IATA" id="partnership" data-type="radio" data-name="company_type" data-validation-message="Check one of them" data-required="yes" data-validation-required-message="This field is required">
                                        <label class="form-check-label" for="partnership">
                                            NON IATA
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Proprietorship/Partnership/Pvt.Ltd.Co <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='company_partnership' style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">TAAI/TAFI Membership Number <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='membership_number'  data-pattern="^(\d)+$" minlength="10" maxlength="12" data-validation-message="Only Numbers" style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Office Tel. No <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='office_number'  data-pattern="^(\d)+$" minlength="10" maxlength="12" data-validation-message="Only Numbers" style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Office Fax Nos <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='office_phone'  data-pattern="^(\d)+$" minlength="10" maxlength="12" data-validation-message="Only Numbers" style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Mobile Nos <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='office_mobile'  data-pattern="^(\d)+$" minlength="10" maxlength="12" data-validation-message="Only Numbers" style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>                      
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Email Address <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='office_email'  data-pattern="^[a-zA-Z0-9.!#$%&amp;'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$" data-validation-message="Not valid email" style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">1. Full Name of Owners/Director 1 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='owner_name' style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Address <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='owner_address' style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Mobile <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='owner_mobile'  data-pattern="^(\d)+$" minlength="10" maxlength="12" data-validation-message="Only Numbers" style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">2. Full Name of Owners/Director 2 <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='owner2_name' style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Address <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='owner2_address'  style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-12 col-md-12 col-12" style="float: left;padding: 0px; padding-left: 0px;">
                            <div class="form-group basic pull-left w-100">
                                <div class="input-wrapper">
                                    <label class="label" for="name">Mobile <span class="text-danger">*</span></label>
                                    <input type="text" class="form-control input_style" name='owner2_mobile'  data-pattern="^(\d)+$" minlength="10" maxlength="12" data-validation-message="Only Numbers" style="font-size: 15px !important;" data-required="yes" data-validation-required-message="This field is required">
                                </div>
                            </div>
                        </div> 
                        <div class="section-title pull-left text-center mt-1 w-100 bold font17">Supporting Documents: (compulsory)</div>
                        <div class="form-group basic pull-left w-100">
                            <div class="input-wrapper">
                                <label class="label mb-1">Upload Company PAN <span class="text-danger">*</span></label>
                                <div class="custom-file-upload" style="height: 40px;">
                                    <input type="file" id="add_pan" onchange="readFile(this,'#kyc_form input[name=pan]')" accept="image/*,application/pdf" data-required="yes" data-validation-required-message="This field is required">
                                    <label for="add_pan">
                                        <span>
                                            <strong>                                                    
                                                <i>Choose file</i>
                                            </strong>
                                        </span>
                                    </label>
                                    <input type="hidden" name='pan'>
                                </div>
                            </div>
                        </div>
                        <div class="form-group basic pull-left w-100">
                            <div class="input-wrapper">
                                <label class="label mb-1">Owners Address proof <span class="text-danger">*</span></label>
                                <div class="custom-file-upload" style="height: 40px;">
                                    <input type="file" id="add_aadhar" onchange="readFile(this,'#kyc_form input[name=aadhar]')" accept="image/*,application/pdf" data-required="yes" data-validation-required-message="This field is required">
                                    <label for="add_aadhar">
                                        <span>
                                            <strong>                                                    
                                                <i>Choose file</i>
                                            </strong>
                                        </span>
                                    </label>
                                    <input type="hidden" name='aadhar'>
                                </div>
                            </div>
                        </div>
                        <div class="form-group basic pull-left w-100">
                            <div class="input-wrapper">
                                <label class="label mb-1">GST Certificate <span class="text-danger">*</span></label>
                                <div class="custom-file-upload" style="height: 40px;">
                                    <input type="file" id="add_gst" onchange="readFile(this,'#kyc_form input[name=gst]')" accept="image/*,application/pdf" data-required="yes" data-validation-required-message="This field is required">
                                    <label for="add_gst">
                                        <span>
                                            <strong>                                                    
                                                <i>Choose file</i>
                                            </strong>
                                        </span>
                                    </label>
                                    <input type="hidden" name="gst">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <div class="btn-inline w-100">
                        <button type="submit" class="btn col-6 pull-left btn-text-primary" onclick="validate('#kyc_form','updateagentKYC')">Submit</button>
                        <button type="button" class="btn col-6 pull-left btn-text-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </div>
            </div>
            </div>
        </div>
<script src="assets/js/lib/jquery-3.4.1.min.js"></script>

<script src="assets/js/lib/popper.min.js"></script>
<script src="assets/js/lib/bootstrap.bundle.min.js"></script>

<script src="assets/js/lib/popper.min.js"></script>
<script src="assets/js/lib/moment.min.js"></script>
<script src="assets/js/bootstrap-datetimepicker.min.js"></script>
<script src="assets/js/base.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYJYiPSqHHDb58B0yaPfCu+Wgds8Gp/gU33kqBtgNS4tSPHuGibyoeqMV/TJlSKda6FXzoEyYGjTe+vXA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://unpkg.com/jspdf@latest/dist/jspdf.umd.min.js"></script>

</body>

</html>
<script>
//     function save_pdf()
// {
//     window.jsPDF = window.jspdf.jsPDF;

// var doc = new jsPDF({
//     orientation: 'landscape',
// })
// var width = doc.internal.pageSize.getWidth();

// // Source HTMLElement or a string containing HTML.
// var elementHTML = document.querySelector(".get_details");

// doc.html(elementHTML, {
//     callback: function(doc) {
//         // Save the PDF
//         doc.save('sample-document.pdf');
//     },
//     x: 0,
//     y: 10,
//     width: width, //target width in the PDF document
//     windowWidth: $(window).width() //window width in CSS pixels
// });
// }
function save_pdf()
{
    $('.download-btn').html('Please Wait').parent().attr('disable',true)
    let searchParams = new URLSearchParams(window.location.search)
    id = searchParams.get('id')
    $.ajax({
        type: "get",
        async: true,
        url: baseurl + 'KYC/create_agent_pdf',
        data: 'id=' + id,
        success: function (html) 
        {
            $('.download-btn').html('Download').parent().attr('disable',false)
            window.location.href=baseurl + 'KYC/download_pdf?id='+id;
        }

    });
}

get_agent_data()
function get_agent_data()
{
    let searchParams = new URLSearchParams(window.location.search)
    id = searchParams.get('id')
    $.ajax({
        type: "get",
        async: true,
        url: baseurl + 'KYC/get_agent_KYC_data',
        data: 'id=' + id,
        success: function (html) 
        {
            console.log(html)
            $('.get_details').html(html)
        }

    });
}
function updateagentKYC()
{
  	data='';
    $('#kyc_form button[type=submit]').attr('disabled',true)
  	$('#kyc_form').find('select, textarea, input[type=text], input[type=hidden], input[type=radio]:checked, input[type=checkbox]').each(function(){
  		if(data=='')
        {
  			val=$(this).val().replace(/&/g,'amp;').replace(/\+/g,'plussss')
  			data+=$(this).attr('name')+'='+val
        }
  		else
		{
  			val=$(this).val().replace(/&/g,'amp;').replace(/\+/g,'plussss')
  			data+='&'+$(this).attr('name')+'='+val  			
  	    }
  	})
    $.ajax({
        type: "POST",
        url: baseurl + 'KYC/updateKYC',
        async: true,
        data: decodeURIComponent(data)+'&table=agent',
        success: function (html) 
        {
            $('#kyc_form button[type=submit]').attr('disabled',false)
  	        if(html.trim()=='ok')
            {
                show_toast('Data updated successfully', "success", '', "top", "success");  
                $('#kyc_form').find('input[type=text]').val('')
                $('#kyc_form').find('input[type=hidden]').val('')
                $('#kyc_form').find('input[type=radio]:checked').prop('checked',false)
                $('#kyc_form .custom-file-upload label').removeClass('bg-success')
                $('#kyc_form').modal('hide')
                get_agent_data()
            }
        }
    }); 
    
}
</script>