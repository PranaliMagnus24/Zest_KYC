<!doctype html>
<html lang="en">
<head>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Zest</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover">
    <link href="assets/zestlogo.png" rel="icon">
    <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
    <div class="appHeader no-border transparent position-absolute">
        <div class="pageTitle"></div>
        <div class="right"></div>
    </div>
    <!-- * App Header -->

    <!-- App Capsule -->
    <div id="appCapsule">

        <div class="section mt-2 text-center">
            <img src="assets/zestlogo.png" width="100px">
            <h1>Login</h1>
        </div>
        <div class="section mb-5 p-2 col-lg-5 col-md-5 me-auto ms-auto">
            <div class=" pull-left w-100 mt-2" id="login_class">
                <div class="card">
                    <div class="card-body pb-1">
                        <div class="form-group basic position-relative">
                            <div class="input-wrapper">
                                <label class="label" for="email1">E-mail</label>
                                <input type="email" class="form-control login-ui" name="email" autocomplete="off" placeholder="Your e-mail" data-required="yes" data-validation-required-message="This field is required">
                                <i class="clear-input">
                                    <ion-icon name="close-circle"></ion-icon>
                                </i>
                            </div>
                        </div>

                        <div class="form-group basic position-relative">
                            <div class="input-wrapper">
                                <label class="label" for="password1">Password</label>
                                <input type="password" class="form-control login-ui" name="password" autocomplete="off" placeholder="Your password" data-required="yes" data-validation-required-message="This field is required">
                                <i class="clear-input">
                                    <ion-icon name="close-circle"></ion-icon>
                                </i>
                            </div>
                        </div>
                    </div>
                </div>


                <div class="mt-3 me-auto ms-auto transparent">
                    <button type="button" class="btn btn-primary btn-block btn-lg" onclick="validate('#login_class','login')" style="background: #0071cd !important;border-color: #0071cd !important;" onclick="validate('#login','login')"><svg class="checkmark hidden" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/>
                        <path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg> Log in
                    </button>
                </div>

                </form>
            </div>

        </div>
        <!-- * App Capsule -->



        <!-- ========= JS Files =========  -->
        <!-- Bootstrap -->
        <script src="assets/js/lib/jquery-3.4.1.min.js"></script>
        <!-- Bootstrap-->
        <script src="assets/js/lib/popper.min.js"></script>
        <script src="assets/js/lib/bootstrap.bundle.min.js"></script>

        <!-- Ionicons -->
        <!-- Base Js File -->
        <script src="assets/js/base.js"></script>


</body>

</html>
<script type="text/javascript">
    function login() 
    {
        data='';
        $('#login_class button[type=submit]').attr('disabled',true)
        $('#login_class').find('select, textarea, input').each(function(){
            if(data=='')
            {
                val=$(this).val().replace(/&/g,'amp;').replace(/\+/g,'plussss')
                data+=$(this).attr('name')+'='+val
            }
            else
            {
                val=$(this).val().replace(/&/g,'amp;').replace(/\+/g,'plussss')
                data+='&'+$(this).attr('name')+'='+val  			
            }
        })
        
        $.ajax({
            type: "get",
            url: baseurl + 'User/login',
            data: data+'&req=4',
            success: function(html) {
                html=JSON.parse(html)
                console.log(html)
                if (html['success'] == true) {
                    localStorage.setItem("user_id", html['data']['id']);
                    localStorage.setItem("user_email", html['data']['email']);
                    localStorage.setItem("user_name", html['data']['name']);
                    localStorage.setItem("user_type", html['data']['type']);
                    window.location.replace("get_verified_document.html");
                 
                } else {
                    show_toast(html['data'], "danger", 'big', "center", "inverse");
                }
                
            },

        });
    }


    function show_toast(message, type, not_type, pos = 'top', bg = 'inverse') {
        var random = Math.floor(Math.random() * 10);
        if (type == 'danger') {
            $text_type = 'name="close-circle-outline" class="text-danger"'

        } else {
            $text_type = 'name="checkmark-circle" class="text-success"';
        }
        if (not_type == 'big') {
            $('body').append('<div id="toast' + random + '" class="toast-box bg-' + bg + ' text-center toast-' + pos + ' show"><div class="in"><ion-icon ' + $text_type + '></ion-icon><div class="text">' + message + '</div></div></div>')
        } else {
            $('body').append('<div id="toast' + random + '" class="toast-box bg-' + bg + ' text-center toast-' + pos + ' show"><div class="in w-100 p-0"><div class="text">' + message + '</div></div></div>')
        }
        setTimeout(() => {
            $('#toast' + random).removeClass('show');
            $('#toast' + random).remove();
        }, 3000);
        setTimeout(() => {
            $('#toast' + random).remove();
        }, 3500);
    }
</script>